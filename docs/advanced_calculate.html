
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Advanced Use of Calculate Questions &#8212; KoBoToolbox  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/kobo_theme.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/js/custom.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to Use the Video Question Type" href="video_question_type.html" />
    <link rel="prev" title="How to Use the Calculate Question Type" href="calculate_questions.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
<header role="banner" class="main-header">
  <h1 class="main-header__logo">
    <a href="https://kobotoolbox.org/#home">KoBoToolbox</a>
  </h1>
  <nav class="main-header__navigation" role="navigation">
    <ul>
      <li><a href="https://kobotoolbox.org/#home">Home</a></li>
      <li><a href="https://kobotoolbox.org/#features">Features</a></li>
      <li><a href="https://kobotoolbox.org/#sign-up">Sign Up</a></li>
      <li><a href="https://kobotoolbox.org/#about">About</a></li>
      <li><a href="https://kobotoolbox.org/#help">Help</a></li>
    </ul>
  </nav>
</header>

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="advanced-use-of-calculate-questions">
<h1>Advanced Use of Calculate Questions<a class="headerlink" href="#advanced-use-of-calculate-questions" title="Permalink to this headline">¶</a></h1>
<p>Some advanced forms may require an internal calculation to take place as part of the form (rather than afterwards during the analysis). This can be done by adding a <strong>Calculation</strong>, and writing the mathematical expression into the question label field.</p>
<p>This article provides step-by-step instructions on how to add calculations while using the form builder or by downloading and adding it directly to the XLSform.</p>
<p>To view a complete and detailed list of all functions please visit ODK’s excellent <a class="reference external" href="https://getodk.github.io/xforms-spec">XPath Functions documentation</a>.</p>
<div class="section" id="approaches-towards-adding-calculate-questions">
<h2>Approaches towards adding calculate questions:<a class="headerlink" href="#approaches-towards-adding-calculate-questions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-the-form-builder">
<h3>Using the form builder<a class="headerlink" href="#using-the-form-builder" title="Permalink to this headline">¶</a></h3>
<p>Step 1: Add a calculate question</p>
<p><img alt="image" src="_images/calculate_question.jpg" /></p>
<p>Step 2: Type your calculation formulae where you would typically write your question.</p>
<p><img alt="image" src="_images/formulas.jpg" /></p>
<p>Note:</p>
<ul class="simple">
<li>Your calculate question will not be displayed when conducting data entry/collection either on Kobo Collect or Enketo. It will, however, be displayed when looking at the data in the table view or in the downloaded version.</li>
<li>You must follow similar rules as for XLS forms (see our section rules below).</li>
</ul>
</div>
<div class="section" id="using-the-xls-forms">
<h3>Using the XLS forms<a class="headerlink" href="#using-the-xls-forms" title="Permalink to this headline">¶</a></h3>
<p>We recommend this approach when working with more advanced calculate functions.</p>
<p>XLS forms allow for use of calculate function on different types of question types.</p>
<ul>
<li><p class="first">You can mimic the approach used in the form builder where the question will not be displayed on data collection by simply defining the question type as ‘calculate’ and then typing your calculation within the calculate column.</p>
</li>
<li><p class="first">You can use ‘calculate’ for different question types, and in this case the question will be displayed during data collection. You can choose to make that question a read-only so that no one can change the entry. The question types we have tested with this approach include:</p>
<p>a. integer (will only take numeric calculate functions)<br />b. text (will only take string calculate functions)<br />c. note (will take only question referencing and not calculate functions)<br />d. date (will only take date calculate functions)<br />e. time (will only take time calculate functions)</p>
<p><img alt="image" src="_images/xls1.png" /></p>
</li>
</ul>
</div>
</div>
<div class="section" id="rules-when-working-with-calculate-questions">
<h2>Rules when working with calculate questions:<a class="headerlink" href="#rules-when-working-with-calculate-questions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="these-rules-apply-to-both-the-form-builder-and-xlsform">
<h3>These rules apply to both the form builder and XLSform<a class="headerlink" href="#these-rules-apply-to-both-the-form-builder-and-xlsform" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li>You cannot use both numeric and string calculations within the same question</li>
<li>Your numeric calculations will follow the BODMAS rule in applying calculations i.e. the order of executing the calculations will be Brackets, Divisions, Multiplications, Additions then Subtractions (Always remember this when ordering a question)</li>
<li>Calculate questions that reference other questions should not be placed on the same group as the reference questions since the calculate will not appear unless you move from the group</li>
<li>When referencing a question in a calculation you need to indicate it as <code class="docutils literal notranslate"><span class="pre">${Question}</span></code> where question is the name of the question</li>
<li>You can “force” a calculation to evaluate by setting ‘required’ to TRUE</li>
</ol>
</div>
<div class="section" id="list-of-tested-calculate-functions">
<h3>List of tested calculate functions<a class="headerlink" href="#list-of-tested-calculate-functions" title="Permalink to this headline">¶</a></h3>
<p><em>(Please feel free to recommend additional ones and we will update)</em></p>
<p><img alt="image" src="_images/list.png" /></p>
</div>
<div class="section" id="working-with-if-command-on-calculations">
<h3>Working with IF command on calculations<a class="headerlink" href="#working-with-if-command-on-calculations" title="Permalink to this headline">¶</a></h3>
<p><img alt="image" src="_images/if_command.png" /></p>
</div>
<div class="section" id="work-arounds-for-calculations">
<h3>Work-arounds for calculations<a class="headerlink" href="#work-arounds-for-calculations" title="Permalink to this headline">¶</a></h3>
<p><em>Recommended for advanced users</em></p>
<div class="section" id="workaround-1-creating-dummy-questions-for-calculation-of-final-score-in-a-series-of-questions">
<h4>Workaround 1: Creating Dummy Questions for Calculation of Final Score in a Series of Questions**<a class="headerlink" href="#workaround-1-creating-dummy-questions-for-calculation-of-final-score-in-a-series-of-questions" title="Permalink to this headline">¶</a></h4>
<p>Let’s say you have a question like  <code class="docutils literal notranslate"><span class="pre">QN1</span> <span class="pre">Do</span> <span class="pre">you</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">question?</span></code> Answers <code class="docutils literal notranslate"><span class="pre">Yes=1</span> <span class="pre">No=2</span> <span class="pre">Don’t</span> <span class="pre">Know=999</span></code></p>
<p>In this case you may want to create a dummy QN1 right after QN1 to account for the differences in coding and define the mathematical equivalent. So you will create a calculate question QN1d (<em>note this is my own naming convention d stands for dummy) and define the default value as 0 but write the formula as <strong>If (${QN1}=1,1,0</strong></em>)</p>
<p>Notice in my test form I managed to create the situation and the data appears as coded for Q1N and as calculated for mathematical meaning for Q1Nd. This should be meaning that is meant by your score. <em>You can do this for calculations such as wealth where Yes and No could mean a different value in different countries.</em></p>
<p>Once you do this for all your questions you can add a calculate question that sums up all the dummies as:</p>
<p><code class="docutils literal notranslate"><span class="pre">${QN1d}+${QN2d}+</span> <span class="pre">etc</span></code></p>
</div>
</div>
</div>
</div>


          </div>
    <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="calculate_questions.html" title="Previous document">How to Use the Calculate Question Type</a>
        </li>
        <li>
          <a href="video_question_type.html" title="Next document">How to Use the Video Question Type</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>

        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><a class="button button--black" href="index.html">Support Home</a><h3>Navigation</h3>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Welcome to KoboToolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Which Server Should I Use?</a></li>
<li class="toctree-l1"><a class="reference internal" href="activation_link.html">FAQ: Didn’t Receive My Activation Link After Signing Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="reset_password.html">Resetting Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdpr.html">General Data Protection Regulation (GDPR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="training_arabic.html">KoboToolbox Training Materials in Arabic</a></li>
</ul>
<p class="caption"><span class="caption-text">KoBoToolbox on Your Computer or Server</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="software_architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="kobo_local_computer.html">Installing on a Local Computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="kobo_your_servers.html">Install KoBoToolbox on Your Own Servers</a></li>
</ul>
<p class="caption"><span class="caption-text">Creating Forms</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="new_project.html">How to Create a New Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit_forms_excel.html">Editing Forms in Excel using XLSForm</a></li>
<li class="toctree-l1"><a class="reference internal" href="xls_url.html">Importing an XLSForm via URL</a></li>
<li class="toctree-l1"><a class="reference internal" href="formbuilder.html">Overview of all Formbuilder Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="question_types.html">List of Question Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="question_options.html">Question Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="skip_logic.html">Adding Skip Logic to Your Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation_criteria.html">Limiting Responses with Validation Criteria</a></li>
<li class="toctree-l1"><a class="reference internal" href="rating_ranking.html">Rating vs Ranking Question Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculate_questions.html">How to Use the Calculate Question Type</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Use of Calculate Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#approaches-towards-adding-calculate-questions">Approaches towards adding calculate questions:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rules-when-working-with-calculate-questions">Rules when working with calculate questions:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="video_question_type.html">How to Use the Video Question Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrix_response.html">Question Matrix response type</a></li>
<li class="toctree-l1"><a class="reference internal" href="responses_inside_question.html">Include Responses Inside Another Question</a></li>
<li class="toctree-l1"><a class="reference internal" href="number_text_responses.html">Limits on Number and Text Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_specified_other.html">User-Specified “Other” Responses for Multiple-Choice Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="media.html">Adding Media to Your Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_logo.html">Adding a Custom Logo to Your Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="cascading_select.html">Adding Cascading Select Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_repeat.html">Grouping Questions and Repeating Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="restrict_responses.html">Restricting text responses with regular expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="p_codes.html">How to Include P-Codes in the Output Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="unique_serial_numbers.html">How to Create Unique Serial Numbers in Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="pull_data_kobotoolbox.html">Pull Data () Functionality in Kobotoolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="audit_logging.html">Audit Logging Meta Question Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="collecting_signatures.html">Collecting signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="language_dashboard.html">Adding Another Language in the Project Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="language_xls.html">Adding Another Language to your XLS Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="form_meta.html">Form Settings and Meta Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="encrypting_forms.html">Encrypting Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_format_web.html">Custom Formatting in Web Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="alternative_enketo.html">Using Alternative Enketo Web Form Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="hxl.html">Using Hxl Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="lower_file_size.html">How To Lower the File Size of Collected Media</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_form_new_project.html">How to Deploy a Form to Start a New Data Collection Project</a></li>
</ul>
<p class="caption"><span class="caption-text">Collecting Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data-collection-tools.html">Overview on Data Collection Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording-interviews.html">Recording Entire Interviews</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_through_webforms.html">Collecting Data through Web Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-offline.html">Collecting Data Offline</a></li>
<li class="toctree-l1"><a class="reference internal" href="kobocollect-android.html">Collecting Data with KoBoCollect on Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices_for_data_collection.html">Recommended Devices for Data Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="hipaa_compliance.html">HIPAA Compliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting_kobocollect.html">Troubleshooting KoBoCollect Android Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting_webforms.html">Troubleshooting Enketo Web Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_upload.html">Manually Uploading Submissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="collect_gps.html">Collecting GPS Locations</a></li>
</ul>
<p class="caption"><span class="caption-text">Managing Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="project_summary.html">Project Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="record_validation.html">Record Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="delete_project.html">Deleting a project from your account</a></li>
<li class="toctree-l1"><a class="reference internal" href="stuck_in_pending.html">Exports stuck in pending state</a></li>
</ul>
<p class="caption"><span class="caption-text">Managing your Project's Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stuck_in_pending.html">Exports stuck in pending state</a></li>
<li class="toctree-l1"><a class="reference internal" href="export_download.html">Exporting and Downloading Your Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="archiving_projects.html">Archiving and unarchiving your projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_services.html">REST Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_permissions.html">Managing permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="export_gps.html">Mapping, sharing, and exporting GPS data</a></li>
<li class="toctree-l1"><a class="reference internal" href="is_my_data_safe.html">Is my data safe on your server?</a></li>
<li class="toctree-l1"><a class="reference internal" href="pulling_data_into_excelquery.html">Pulling your data into Excel Power Query</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto_edit_single_submissions.html">How to edit or delete a single submission</a></li>
<li class="toctree-l1"><a class="reference internal" href="photo_download.html">Downloading photos and other media</a></li>
<li class="toctree-l1"><a class="reference internal" href="recovering_previous_formdata.html">Recovering data from previous form versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="converting_to_spss_and_stata.html">Converting your Data into SPSS and/or Stata</a></li>
<li class="toctree-l1"><a class="reference internal" href="excel_analyzer_guide.html">Excel Analyzer User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="pulling_data_into_powerbi.html">Pulling your data into PowerBI</a></li>
<li class="toctree-l1"><a class="reference internal" href="upload_to_gis.html">Exporting and uploading your data to GIS software</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, KoBoToolbox.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/advanced_calculate.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>